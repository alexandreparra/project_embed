## Native Extensions
Through native extensions, Hashlink exposes its [VM API written in C](https://github.com/HaxeFoundation/hashlink/wiki/C-API-Documentation) 
so that we can create high performance libraries in native code that will interoperate 100% with Haxe/Hashlink. To do so 
we need Hashlink's dll's and the `hl.h` header file so that we can compile a shared library that Hashlink will load.

Here I'll be implementing a [ring buffer (or circular buffer)](https://en.wikipedia.org/wiki/Circular_buffer) in C, and through native extensions I'll expose 
my C code as a class called `RingBuffer` in Haxe. The C code will be transformed into a dll that will be named `hdll`.

Shortly we are going to:
1. Create a shared library (.dll or .so, here called .hdll) using C/C++
2. Compile our code to generate a .hdll and .lib files
3. Put both files inside your hashlink installation directory (notice that inside it, we already have a bunch of .hdlls and .libs, so it's easy to identify the folder)
4. Import our Haxe wrapper (that's inside `lib/ringbuffer`) inside our project using the compile.hxml file (it's important that the Haxe wrapper live inside the `ringbuffer` folder so that it can be considered a proper package).
5. Import our `RingBuffer` class inside our `Main.hx` and use it.

The project has a `CMakeLists.txt` that will automatically generate the needed files to compile our program, 
so you'll need to install [CMake](https://cmake.org/). Under Windows, you'll need to have [Visual Studio](https://visualstudio.microsoft.com/) 
and it's C++ toolchain installed to further compile the solution file generated by CMake. Under Linux, just use your distro's
package manager to install CMake and GCC.

The source code is basically our `Main.hx` that will call our RingBuffer, `ring_buffer.c` which is our native library and
`RingBuffer.hx` that will wrap our native library and expose an Object-Oriented API.

## Building
To correctly run the example here you need to download the latest Hashlink release from their [GitHub](https://github.com/HaxeFoundation/hashlink/releases)
and extract its contents in the folder `external/hashlink` so that CMake can correctly link against the pre compiled libraries.
This makes it easier to create this example. 

After using CMake and compiling your solution or makefile, just copy the resulting
`ring_buffer.hdll` and `ring_buffer.lib` to your Hashlink installation folder, now you can run `haxe compile.hxml` to 
automatically transform our `Main.hx` and library wrapper `RingBuffer.hx` into Hashlink bytecode, then you can run it by 
using `hl main.hl`.

## Credits
Most of my research to create the native extension was done reading the Hashlink standard libraries but [this tutorial and its own references](https://github.com/HaxeFoundation/hashlink/wiki/HashLink-native-extension-tutorial)
helped a lot alongside the C API.
